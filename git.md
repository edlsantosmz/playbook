# Git Essential Training
## Installing Git
### Exploring Git-auto-completion (Mac/Linux)
1. Install homebrew

2. Install Git and bash-completion: brew install git bash-completion (Note: If this install fails with a 404 error, and you already have git installed, just remove the git part of this brew install)

3 .Add bash-completion to your `~/.bash_profile`:

`[ -f /usr/local/etc/bash_completion ] && . /usr/local/etc/bash_completion`


## Getting Started
### Performing your first commit


```
git add .
git commit -m "<comment>"
```

Git process
* Make changes
* Add changes
* Commit changes to the repository with a message

### Writing commit mesages 

What you really want to do is have a commit message that describes the changes that you're making in that commit set, so added file to project, that would be more descriptive saying that we added this first file. We are labeling what we were doing in this change set so when we come back and look at it later, we can just look at the commit message and know what's inside, what's contained in that set.

Commit message best practices
* short single-line summary, less than 50 characters
* Optionally, we can follow that by a blank line and then a more complete description
* keep those additional lines to less than 72 characters
* write commit messages in the present tense, not in the past tense, you are labeling what this commit does, not what you--as the creator--were doing. Label what it does. This fixes a bug, not I fixed a bug. It's not about you, it's about what this commit is.
*  bullet points that describe what happens you usually use asterisk or hyphens
* Add ticket tracking numbers from bugs or support requests or develop a shorthand for your organization
* Can develop shorthand for your organization
** "[cs,js]"
** "bugfix:"
** "#8981 - " 

Label

* Be clear and descriptive
** Bad: "Fix typo"
** Good: "Add missing > in project section of HTML" 
** Bad: "Update Login code"
** Good: "Change user authentication to use Blowfish"

Example
```
t23094 - Fixes bug in admin logout.

When an admin logged out of the admin area, they could not log in to the members area because their session :user_id was still set to the admin ID. This patch fixes the bug by setting session :user_id to nil when any user logs out of any area.
```

`Notice that it describes what the problem was and then describes what the solution was as well.``

### Viewing the commit log
```
git log
commit f247c20fe52a6fb0acf1d2773cb7b6699058461c (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Fri Jul 27 21:57:21 2018 +0200

    Initial commit
```
Where
* commit: unique ID
* author: pulled from the global configuration

`git help log`

See number of commits
`git log -n <number>`

See commits in a specific period of time
```
git log --since=YY-MM-DD
git log --until=YY-MM-DD
git log --author="<name>"
```

Regular eexpression search in the commit message
`git log --grep="<regex-string>"`

## Git concepts and architecture
### Exploring the three-trees architecture
![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/Skärmavbild%202018-07-27%20kl.%2022.18.55.png "Two tree architecture")

![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/Skärmavbild%202018-07-27%20kl.%2022.23.10.png "Three-tree architecture")

* Working copy: where we have our changes that we've made, and we've saved, and saved to our hard drive, but we have not yet committed them to the repository, we haven't told Git to make this a changed set and to track it.
* Staging index, which is where we prepare things, we stage them for the commit, and then after they've been staged, we commit them to the repository so that they are permanently tracked and they now have a commit message attached to them.

### Git workflow

### Using hash value (SHA-1)
* Git generates a checksum for each changed set.
    * A checksum is a number that's generated by taking data and feeding it into an algorithm, so checksum algorithm converts data into a simple number, and we call that simple number a checksum
    * Changing the data changes the checksum
* Git generates this checksum is by using the SHA-1 hash algorithm
    * The number that the algorithm generates is always going to be a 40 character hexadecimal string. Hexadecimal means they can have the numbers 0 through 9 and the letters a through f.

![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/git_referring_to_commits.png)

### The HEAD pointer
Git maintains a reference variable called HEAD, all capitals, H-E-A-D. And we call this variable a pointer, because its purpose is to reference, or point to, a specific commit in the repository as we make new commits the pointer is going to change or move to point to a new commit.

HEAD
* Pointer to "tip" of current branch in repository
* Last state of repository, what was last checked out
* Not staging or working environment
* [analogy] - recording audio in a tape

![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/git_head.png)

```
cd .git
Eduardos-MacBook-Pro:.git eduardos$ ls -ls
total 88
 8 -rw-r--r--   1 eduardos  staff     15 27 Jul 21:57 COMMIT_EDITMSG
 8 -rw-r--r--   1 eduardos  staff     23 27 Jul 21:56 HEAD
 8 -rw-r--r--   1 eduardos  staff    137 27 Jul 21:56 config
 8 -rw-r--r--   1 eduardos  staff     73 27 Jul 21:56 description
 0 drwxr-xr-x  12 eduardos  staff    384 27 Jul 21:56 hooks
56 -rw-r--r--   1 eduardos  staff  27715 27 Jul 21:57 index
 0 drwxr-xr-x   3 eduardos  staff     96 27 Jul 21:56 info
 0 drwxr-xr-x   4 eduardos  staff    128 27 Jul 21:57 logs
 0 drwxr-xr-x  88 eduardos  staff   2816 27 Jul 21:57 objects
 0 drwxr-xr-x   4 eduardos  staff    128 27 Jul 21:56 refs
Eduardos-MacBook-Pro:.git eduardos$ cat HEAD
ref: refs/heads/master
Eduardos-MacBook-Pro:.git eduardos$ cat refs/heads/master
f247c20fe52a6fb0acf1d2773cb7b6699058461c
```
`git log HEAD`

## Making changes to files
### Adding files
```
git status
On branch master

No commits yet

Changes to be committed:  <--- Staging index, things that are being staged
  (use "git rm --cached <file>..." to unstage)

	new file:   one

Untracked files: <---- Things in our working directory
  (use "git add <file>..." to include in what will be committed)

	second
    
git commit -m "Adding one"
[master (root-commit) 7295b6b] Adding one
 1 file changed, 1 insertion(+)
 create mode 100644 one

git add second

git commit -m "Adding second"
[master 4b39a35] Adding second
 1 file changed, 2 insertions(+)
 create mode 100644 second
 
git status
On branch master
nothing to commit, working tree clean
```

### Editing files

```
git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   one

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	third

no changes added to commit (use "git add" and/or "git commit -a")
$ git add one
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   one

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	third

$ git commit -m "updated one"
[master 45fff06] updated one
 1 file changed, 1 insertion(+), 1 deletion(-)
Eduardos-MacBook-Pro:git_lesson eduardos$ git status
On branch master
Untracked files:
  (use "git add <file>..." to include in what will be committed)

	third

nothing added to commit but untracked files present (use "git add" to track)
``` 

### Viewing changes with diff

`git diff <file>`
Return the changes that are in the working directory

```
$ git diff
diff --git a/second b/second
index eba21f2..7b2e797 100644
--- a/second	<--- Version in the stage index (old)
+++ b/second	<--- Version in the working directory (new)
@@ -1,2 +1,2 @@
-second		<--- old version
+second text	<--- new version
``` 

### Viewing only staged changes

`git diff --staged`
Return the changes that are in the staging index

``` 
$git diff --staged
diff --git a/second b/second
index eba21f2..7b2e797 100644
--- a/second	<--- Version in the repository (old)
+++ b/second	<--- Version in the staging index (new)
@@ -1,2 +1,2 @@
-second
+second text
``` 
### Deleting files
Command: `git rm <file>`

``` 
$ git rm third
rm 'third'
Eduardos-MacBook-Pro:git_lesson eduardos$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	deleted:    third

$ git commit -m "remove third"
[master eb79e59] remove third
 1 file changed, 1 deletion(-)
 delete mode 100644 third
 ``` 

### Moving and renaming files
Command: `git mv <file>`

```
$ git mv one first_file.txt
$ mkdir images
$ git mv second images/info.txt
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	renamed:    one -> first_file.txt
	renamed:    second -> images/info.txt
``` 

## Git in a real project

### git diff
Use less pager which is built into UNIX. 

**Toggle fold long lines:** `minus sign(-) + shift + S + return` or start it up using the -R command, and you can set that in your global configuration

**Backwards:**: `b`

**Forwards:** `f`

#### Color the output
`git diff --color-words <file>`

```
git diff --color-words contact.html
diff --git a/contact.html b/contact.html
index 80d262c..b99781c 100755
--- a/contact.html
+++ b/contact.html
@@ -71,7 +71,7 @@
            <p>If you're on this page, we're guessing you've got something to say! Drop us a line, and be sure to sign up for our newsletter. If you're looking for our seasonal tours,  let us know when you're thinking of taking a trip. No

            <h2>Support options</h2>
            <p>If you're currently on a tour and need support, please visit our <a href="support.html">support</a> page. If none of these options are right for you and you still need to get in touch with us, feel free to call us at<span c
          </div>

          <form id="frmContact" name="frmContact" method="post" action="contact_process.html">
@@ -270,7 +270,7 @@
          <h2>Explore California</h2>
          <p>5605 Nota Street<br />
            Ventura, CA 93003</p>
          <p>866.555.4310<br />866.555.4315/>866.555.41314 <em>(24 hour support)</em></p>
        </div>
      </div>
    </div>
``` 

#### Shortcut: git add + git commit

`git commit -am "<message>`: Add it to the staging index and then commit it. All in one big move

```
git commit -am "Updating phone number"
[master 30ddb0c] Updating phone number
 10 files changed, 12 insertions(+), 12 deletions(-)
``` 

Caveat 1: grabs everyting in yor working envrionment

Caveat 2: files that are not being tracked or being deleted doesn't work

Examples:
``` 
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   tours.html
	renamed:    tours/tour_detail_backpack.html -> tours/tour_detail_backpack_cal.html
	modified:   tours/tour_detail_bigsur.html

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   contact.html
	
$ git commit -m "Renamed backpack cal for clarity"
[master 11a13c7] Renamed backpack cal for clarity
 3 files changed, 2 insertions(+), 2 deletions(-)
 rename tours/{tour_detail_backpack.html => tour_detail_backpack_cal.html} (100%)
 
  git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   contact.html

git commit -am "Remove some contractions"
[master 4d1fcbe] Remove some contractions
 1 file changed, 1 insertion(+), 1 deletion(-)
 
 ``` 
## Undoing changes
### Undoing working directory changes
`git checkout -- <file/folder>` 
* Undo files from your working environment

It's a good practice when we're not trying to checkout a branch to put dash--dash, followed by index.html that says stay on the current branch. That bare double dash is just there to indicate that we're not checking out a new branch, we're just talking about a file in the current branch. Makes my working directory file look like what the repository has.

```
$ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   resources.html

no changes added to commit (use "git add" and/or "git commit -a")
$ git diff --staged
$ git checkout -- resources.html
$ git status
On branch master
nothing to commit, working tree clean
```

### Unstaging files
`git reset HEAD <file>`
* Resets the staging index whit what is in the repository
* Undo the changes in staging and bring them out to the working environment.

What we're telling it is go look at the HEAD pointer.
The HEAD pointer points to the last commit of the tip of the current branch, which is master. That's our current branch. Go look at that last commit and reset yourself to be the same as what that has. Very similar to what checkout did. Checkout went and checked out that file from the Repo. Here we're resetting the index to be the same as that.

``` 
$ git reset HEAD resources.html
Unstaged changes after reset:
M	resources.html
$ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   resources.html
```

### Amending commits
`git commit --amend -m "<message>"`

* Amend commit message
* Amend content of the commit
* SHA will change every time

### Retrieving old versions
`git checkout <commit-id> -- <file>`
* When you check it out from our particular revision, it puts it into your staging area.

``` 
$ git checkout 4d1fcbe61d -- resources.html
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   resources.html

```
`git diff --staged`


Take part of the SHA and copy it and then say this commit reverts commit, and give that SHA, so it's a reference

`git diff --staged`

### Reverting a commit
`git revert <commit-id>`
* Make an exact mirror image commit

```
$ git revert 9cbe0
[master d3af33e] Revert "Rearrange items to bring on an outdoor trip"
 1 file changed, 3 insertions(+), 3 deletions(-)
$ git log
commit d3af33ebc62f0a7a2d91832fd5382f0e79808e72 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 12:40:48 2018 +0200

    Revert "Rearrange items to bring on an outdoor trip"

    This reverts commit 9cbe0c7fb83892b712020506dd246a429d0b3632.
```

### Using reset to undo commits
`git reset`: Allows us to specify where the HEAD pointer should point to.
* `--soft` 
	* does not change staging inde or working directory, it's just going to move the pointer
* `--mixed` (default)
	* it moves the HEAD pointer to the specified commit
	* changes staging index to match repository
	* does not change working directory
* `--hard`
	* makes our staging index and our working directory exactly match the repo.
	* Most destructive, lose your data
	
#### soft reset
```
$ git reset --soft 9cbe0c7
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   resources.html
	
$ git diff --staged
diff --git a/resources.html b/resources.html
index 497c9e2..e609ff5 100755
--- a/resources.html
+++ b/resources.html
@@ -96,14 +96,14 @@
               <ul>
                 <li>Comfortable hiking shoes</li>
                 <li>Hat</li>
-                <li>Sunglasses</li>
-                <li>Sunscreen</li>
-                               <li>Insect repellent</li>
                 <li>Wet/dry bag to protect valuables</li>
                 <li>Comfortable backpack</li>
                 <li>Stainless steel water bottle</li>
                 <li>Multi-purpose tool</li>
                 <li>Pack no more than one additional day of clothing</li>
+                <li>Insect repellent</li>
+                <li>Sunglasses</li>
+                <li>Sunscreen</li>
               </ul>
             </li>
             <li>Bring comfortable shoes. (I know, we shouldn’t have to say that, but you’d be amazed)</li>
$ git reset --soft d3af33eb
$ git status
On branch master
nothing to commit, working tree clean
``` 
#### mixed reset
``` 
$ git log
commit d3af33ebc62f0a7a2d91832fd5382f0e79808e72 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 12:40:48 2018 +0200

    Revert "Rearrange items to bring on an outdoor trip"

    This reverts commit 9cbe0c7fb83892b712020506dd246a429d0b3632.

commit 9cbe0c7fb83892b712020506dd246a429d0b3632
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 11:35:05 2018 +0200

    Rearrange items to bring on an outdoor trip
$ git reset --mixed 9cbe0c7
Unstaged changes after reset:
M	resources.html

$ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   resources.html
	
$ git log
commit 9cbe0c7fb83892b712020506dd246a429d0b3632 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 11:35:05 2018 +0200

    Rearrange items to bring on an outdoor trip

commit 4d1fcbe61d8943152b8c2a64ce1fa1267581fc12
Author: Eduardo <eduardos@spotify.com>
Date:   Sat Jul 28 21:13:59 2018 +0200

    Remove some contractions
    
$ git reset --mixed d3af33ebc
```

#### hard reset
```
$ git reset --hard 9cbe0c7f
HEAD is now at 9cbe0c7 Rearrange items to bring on an outdoor trip

$ git status
On branch master
nothing to commit, working tree clean

$ git log
commit 9cbe0c7fb83892b712020506dd246a429d0b3632 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 11:35:05 2018 +0200

    Rearrange items to bring on an outdoor trip
    
$ git reset --hard d3af33e
HEAD is now at d3af33e Revert "Rearrange items to bring on an outdoor trip"


$ git log
commit d3af33ebc62f0a7a2d91832fd5382f0e79808e72 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 12:40:48 2018 +0200

    Revert "Rearrange items to bring on an outdoor trip"

    This reverts commit 9cbe0c7fb83892b712020506dd246a429d0b3632.

commit 9cbe0c7fb83892b712020506dd246a429d0b3632
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 11:35:05 2018 +0200

    Rearrange items to bring on an outdoor trip
    
```

### Removing untracked files

`git clean -n` is a test run

``` 
 git status
On branch master
Untracked files:
  (use "git add <file>..." to include in what will be committed)

	junk1
	junk2
	junk3

$ git clean -n
Would remove junk1
Would remove junk2
Would remove junk3
```

`git clean -f` forces to run it

``` 
$ git add junk1
$ git clean -f
Removing junk2
Removing junk3
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	new file:   junk1
```
 
## Ignoring files
### Using .gitignore files

`project/.gitignore`

Provide Git with a set of rules that it can use to know which files to use for commits and which ones should be ignored. Those rules can be very simple, just a list of files one for each line or we can get little fancier, and you some very basic regular expressions. We can use the Asterisk, the Question Mark, a bracket of characters, a character set, or a range like 0-9.
* very basic regular expressions
	* * ? [aeiou] [0-9]
* negate expressions with !
	* *.php
	* !index.php
* ignore all files in a directory with trailing slash
	* assets/videos/
* comment lines begin with #, blank lines are skipped

```
$ cat .gitignore
.DS_store
*.zip
*.gz
log/*.log
log/*.log.[0-9]
assets/phothoshop/
assets/videos/
!assets/videos/tour*.mp4
```

### Ideas on what to ignore

* compiled source code
* pacakges and compressed files
* logs and databases
* operating system files generated
* user-uploaded files

Articles
* https://help.github.com/articles/ignoring-files/
* https://github.com/github/gitignore

### Ignoring files globally
* ignore files in all repositories
* settings not tracked in a repository
* user-specific instead of repository-specific

```
# Create global git ignore files
/Users/eduardos/.gitignore_global

git config --global core.excludesfile ~/.gitignore_global 

$ cat ~/.gitconfig
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
[user]
	name = Eduardo
	email = eduardos@spotify.com
[core]
	excludesfile = /Users/eduardos/.gitignore_global
[difftool "sourcetree"]
	cmd = opendiff \"$LOCAL\" \"$REMOTE\"
	path =
[mergetool "sourcetree"]
	cmd = /Applications/Sourcetree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
	trustExitCode = true
	
``` 

### Ignorig tracked files
In case a file(s) has been comitted before, git will keep track of it. Git can ignore tracking files
`git rm --cached <file>`
* Remove this file from the staging index, not from the repository, just from the staging index.
* That will cause the file to stop being tracked. It will still leave the copy in the repo, it will still leave the copy in my working directory. It's just going to take it out of the index.
* Commit change of deleting.

### Tracking empty directories
Git is designed to be a file-tracking system
* track files
* ignore directories with no files

`add .gitkeep to your empty folder`

## Navigating the commit tree
### Referencing commits
*tree-ish*
* full SHA-1 hash
* short SHA-1 hash
	* at least 4 characters
	* unambiguos (8-10 characters)
* HEAD pointer
* branch reference
* tag reference
* ancestry <reference><^/~>
	* (^) caret - pointing up to the parent tree, moving up
	* (~) tilde - number of generatios
	* parent commit 
		* HEAD^, acf87504^, master^
		* HEAD~1, HEAD~
	* grandparent commit
		* HEAD^^, acf87504^^, master^^
		* HEAD~2
	* great-grandparent commit
		* HEAD^^^, acf87504^^^, master^^^
		* HEAD~3

### Exploring tree listing

``` 
$ git ls-tree HEAD
100644 blob 19fb1af629e7918ee0e48da303d0a98ef7981a8c	.gitignore
040000 tree f504912e05a9dad1623270fd901afb680ccfb6d5	assets
100755 blob 3b9d5ef95fb52270f517b400aebbf69eb6478099	contact.html
100755 blob 681e8dc4b8d3136167d634e82409d08296ac007f	explorers.html
100755 blob f5866d35a05d72067f8386900f637e31606f3ece	index.html
100755 blob 81fd052de398c87c311ea392082f3012c48a3e1c	mission.html
100755 blob e609ff5361fc96e2c65c728ce46c2fe598bcb9e0	resources.html
040000 tree fbb3e45babe87ec29834f02429419b1b47500d7a	resources
100755 blob e73cbdca5a60d4998dab45c7fe7d5e792d64f55e	support.html
100755 blob 8b8f9690b4e3f225c766558b6248d3f026545467	tours.html
040000 tree 53c61e064b038f0750898e48cf0f16d963f78e36	tours

$ git ls-tree HEAD assets/
040000 tree e3d7ef2c409b66ef02d303281f89f3dd05453931	assets/images
040000 tree f15cbd968f05c79290272ccf7fd077fb231f7905	assets/javascripts
040000 tree c8f3e7d20590d0d7ad6180f8fd621c65c7526484	assets/stylesheets

$ git ls-tree HEAD^ assets/
040000 tree e3d7ef2c409b66ef02d303281f89f3dd05453931	assets/images
040000 tree f15cbd968f05c79290272ccf7fd077fb231f7905	assets/javascripts
040000 tree c8f3e7d20590d0d7ad6180f8fd621c65c7526484	assets/stylesheets

blob -> file
tree -> directory
``` 

### Getting more from the commit log
* `git log --oneline` 
* `git log --oneline -<n>`
* `git log --since="2 weeks ago" --until="1 days ago"`
* `git log --since=2.weeks --until=1.days`
* `git log --grep"<regex>"`
* `git log <ref1>..<ref2> --oneline`
* `git log <ref1>.. <file>`
* `git log -p` Patch option
* `git log --stat --summary`
* `git log --format=oneline`
* `git log --format=short`
* `git log --format=full`
* `git log --format=fuller`
* `git log --format=email`
* `git log --format=raw`
* `git log --graph`
* `git log --format=oneline`
* `git log --oneline --graph --all --decorate`


```
$ git log --oneline
218c9d9 (HEAD -> master) Adding .gitignore files
d3af33e Revert "Rearrange items to bring on an outdoor trip"
9cbe0c7 Rearrange items to bring on an outdoor trip
4d1fcbe Remove some contractions
11a13c7 Renamed backpack cal for clarity
30ddb0c Updating phone number
6071420 Initialize repository

$ git log --since="2 weeks ago" --until="1 days ago"
commit 4d1fcbe61d8943152b8c2a64ce1fa1267581fc12
Author: Eduardo <eduardos@spotify.com>
Date:   Sat Jul 28 21:13:59 2018 +0200

    Remove some contractions
...

$ git log --since=2.weeks --until=1.day
commit 9cbe0c7fb83892b712020506dd246a429d0b3632
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 11:35:05 2018 +0200

    Rearrange items to bring on an outdoor trip
...

$ git log 4d1fcbe..d3af33e --oneline
d3af33e Revert "Rearrange items to bring on an outdoor trip"
9cbe0c7 Rearrange items to bring on an outdoor trip

$ git log 6071420.. index.html
commit 30ddb0ccfd279dc4080d03b95a140396f91dc801
Author: Eduardo <eduardos@spotify.com>
Date:   Sat Jul 28 20:58:55 2018 +0200

    Updating phone number
    
commit 218c9d98a7e62aa6458eb67944ecdbf0b5abd270 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 19:50:52 2018 +0200

    Adding .gitignore files

diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..19fb1af
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1,9 @@
+.DS_store
+*.zip
+*.gz
+log/*.log
+log/*.log.[0-9]
+assets/phothoshop/
+assets/videos/
+!assets/videos/tour*.mp4
+

$ git log -p 6071420.. index.html
commit 30ddb0ccfd279dc4080d03b95a140396f91dc801
Author: Eduardo <eduardos@spotify.com>
Date:   Sat Jul 28 20:58:55 2018 +0200

    Updating phone number

diff --git a/index.html b/index.html
index 1268a45..f5866d3 100755
--- a/index.html
+++ b/index.html
@@ -119,7 +119,7 @@
           <h2>Explore California</h2>
           <p>5605 Nota Street<br />
             Ventura, CA 93003</p>
-          <p>866.555.4310<br />866.555.4315 <em>(24 hour support)</em></p>
+          <p>866.555.4310<br />866.555.41314 <em>(24 hour support)</em></p>
         </div>
       </div>
     </div>
     
$git log --stat --summary
commit 218c9d98a7e62aa6458eb67944ecdbf0b5abd270 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 19:50:52 2018 +0200

    Adding .gitignore files

 .gitignore | 9 +++++++++
 1 file changed, 9 insertions(+)
 create mode 100644 .gitignore
 
 $ git log --format=oneline
218c9d98a7e62aa6458eb67944ecdbf0b5abd270 (HEAD -> master) Adding .gitignore files
d3af33ebc62f0a7a2d91832fd5382f0e79808e72 Revert "Rearrange items to bring on an outdoor trip"
9cbe0c7fb83892b712020506dd246a429d0b3632 Rearrange items to bring on an outdoor trip
4d1fcbe61d8943152b8c2a64ce1fa1267581fc12 Remove some contractions
11a13c731485417fe1ef9d251874ed598bbf1a47 Renamed backpack cal for clarity
30ddb0ccfd279dc4080d03b95a140396f91dc801 Updating phone number
60714201c4a8fd702d18db13a08500b27e5fddc4 Initialize repository

 git log --graph
* commit 218c9d98a7e62aa6458eb67944ecdbf0b5abd270 (HEAD -> master)
| Author: Eduardo <eduardos@spotify.com>
| Date:   Sun Jul 29 19:50:52 2018 +0200
|
|     Adding .gitignore files
|

$ git log --oneline --graph --all --decorate
* 218c9d9 (HEAD -> master) Adding .gitignore files
* d3af33e Revert "Rearrange items to bring on an outdoor trip"
* 9cbe0c7 Rearrange items to bring on an outdoor trip
* 4d1fcbe Remove some contractions
* 11a13c7 Renamed backpack cal for clarity
* 30ddb0c Updating phone number
* 6071420 Initialize repository

```

### Viewing commits
* `git show <commit-id>` Does not work with a file
* `git show --format=oneline HEAD~3`

```
$ git show 9cbe0c7
commit 9cbe0c7fb83892b712020506dd246a429d0b3632
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Jul 29 11:35:05 2018 +0200

    Rearrange items to bring on an outdoor trip

diff --git a/resources.html b/resources.html
index e609ff5..497c9e2 100755
--- a/resources.html
+++ b/resources.html
@@ -96,14 +96,14 @@
               <ul>
                 <li>Comfortable hiking shoes</li>
                 <li>Hat</li>
+                <li>Sunglasses</li>
+                <li>Sunscreen</li>
+                               <li>Insect repellent</li>
                 <li>Wet/dry bag to protect valuables</li>
                 <li>Comfortable backpack</li>
                 <li>Stainless steel water bottle</li>
                 <li>Multi-purpose tool</li>
                 <li>Pack no more than one additional day of clothing</li>
-                <li>Insect repellent</li>
-                <li>Sunglasses</li>
-                <li>Sunscreen</li>
               </ul>
             </li>
             <li>Bring comfortable shoes. (I know, we shouldn’t have to say that, but you’d be amazed)</li>

$ git show --format=oneline HEAD~2
9cbe0c7fb83892b712020506dd246a429d0b3632 Rearrange items to bring on an outdoor trip
diff --git a/resources.html b/resources.html
index e609ff5..497c9e2 100755
--- a/resources.html
+++ b/resources.html
@@ -96,14 +96,14 @@
               <ul>
                 <li>Comfortable hiking shoes</li>
                 <li>Hat</li>
+                <li>Sunglasses</li>
+                <li>Sunscreen</li>
+                               <li>Insect repellent</li>
                 <li>Wet/dry bag to protect valuables</li>
                 <li>Comfortable backpack</li>
                 <li>Stainless steel water bottle</li>
                 <li>Multi-purpose tool</li>
                 <li>Pack no more than one additional day of clothing</li>
-                <li>Insect repellent</li>
-                <li>Sunglasses</li>
-                <li>Sunscreen</li>
               </ul>
             </li>
             <li>Bring comfortable shoes. (I know, we shouldn’t have to say that, but you’d be amazed)</li>
```

### Comparing commits
* `git diff <commit-id> <file>`
* `git diff <commit-id-1>..<commit-id-2> <file>`
* `git diff --stat --summary <commit-id>..HEAD`
* `git diff --stat --summary -b -w <commit-id>..HEAD` `-b` ignores space change and `-w`ignores all spaces

```
$ git diff 30ddb0c contact.html
diff --git a/contact.html b/contact.html
index b99781c..3b9d5ef 100755
--- a/contact.html
+++ b/contact.html
@@ -68,7 +68,7 @@
           <h1>Get in touch</h1>
           <img src="assets/images/emerald_bay.jpg" alt="Beautiful Lake Tahoe" class="articleImage" />
           <div class="multiCol">
-            <p>If you're on this page, we're guessing you've got something to say! Drop us a line, and be sure to sign up for our newsletter. If you're looking for our seasonal tours,  let us know when you're thinking of taking a trip. N
+            <p>If you are on this page, we are guessing you have got something to say! Drop us a line, and be sure to sign up for our newsletter. If you are looking for our seasonal tours,  let us know when you are thinking of taking a t

             <h2>Support options</h2>
             <p>If you're currently on a tour and need support, please visit our <a href="support.html">support</a> page. If none of these options are right for you and you still need to get in touch with us, feel free to call us at<span
(END)

$ git diff 4d1fcbe..d3af33e contact.html
$ git diff 4d1fcbe..HEAD^ contact.html

$ git diff --stat --summary 11a13c7..HEAD
 .gitignore   | 9 +++++++++
 contact.html | 2 +-
 2 files changed, 10 insertions(+), 1 deletion(-)
 create mode 100644 .gitignore
 
 
```

## Branching
* branches are cheap
	* try new ideas
	* isolate features
* one working directory
* fast context switching

### Creating new branch
`git branch <name>`

### Switching branches

### Creating and switching branches
`git checkout -b <branch-name>` Create a new branch and switch to it
* N.B. The based branch will be the one where HEAD currently point to it.

### Switching branches with uncommited changes
Keep your files untracked in your working environment so you can switch between branches.

### Comparing branches
Shorthands
* `git diff <Branch_A>..<Branch_B>`
* `git diff --color-words <Branch_A>..<Branch_B>` 	See changes in one line
* `git diff --color-words <Branch_A>..<Branch_B>^`	Previous commit
* `git branch --merged`	Whether one branch completely contains another branch, that is whether or not everything in it has been merged into the current branch
```
Where:
	.. 		Range operator
	Branch_A	Old state
	Branch_B	New state
	
git diff <Branch_A>..<Branch_B>
	
$ git diff master..shorten_title
diff --git a/index.html b/index.html
index f5866d3..c47621d 100755
--- a/index.html
+++ b/index.html
@@ -3,7 +3,7 @@
 <html lang="en">
   <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Welcome to Explore California</title>				<-- Branch A
+    <title>Explore California: Affordable outdoor tours</title>		<-- Branch B
     <link href="assets/stylesheets/main.css" rel="stylesheet" type="text/css" media="all">
     <script src="assets/javascripts/jquery-1.5.1.min.js"></script>
     <script src="assets/javascripts/jquery-ui-1.8.10.custom.min.js"></script>
     
$ git branch --merged
  master
* shorten_title

$ git branch --merged
* master   
```
### Renaming branches
`git branch -m <current_branch_name> <new_branch_name>`
`git branch --move <current_branch_name> <new_branch_name>`
Give a distinguis name to the branch like ticket number.

### Deleting branches
`git brancg -d <branch_to_delete>`
`git branch --delete <branch_to_delete>`
`git branch --D <branch_to_delete>` Forces to throw away all those changes that are in that branch

* Cannot delete that you currently on
* The branch should be merged

### Configuring the command prompt to show the branch
`__git_ps1`
* `PS1` Prompt String One, 
```
$ echo $PS1
\h:\W \u\$
Eduardos-MacBook-Pro:explore_california eduardos$
```

Add your decoration in `~/.bash_profile`
`export PS1='\W$(__git_ps1 "(%s)") > '`

## Merging branches
### Merging code
0. clean your directory
1. check out the receiving branch
2. `git merge <sending branch>` 
	* Sending branch: target branch or the sending branch where you're going to be getting those changes from.

* `git diff master..<sending_branch>`
* `git branch --merged`

### Fast forwards vs true merge
Fast forwards happens when the only object that's different branches is the one commit that master doesn't have

* `git merge --no-ff <sending_branch>` Forces Git to create a merge commit anyway, in case you want to have documentation of the commit
* `git merge --ff-only <sending_branch>` Do the merge only if yo can do a fast-forward

Merge `recursive` strategy, it figured out how to make a merge between the two.

### Merging conflicts
Example
```
git checkout -b text_edits

explore_california(master) > git log --oneline
1fd6eba (HEAD -> master) Replaces double quotes with curly quotes
218c9d9 Adding .gitignore files
d3af33e Revert "Rearrange items to bring on an outdoor trip"
9cbe0c7 Rearrange items to bring on an outdoor trip
4d1fcbe Remove some contractions
11a13c7 Renamed backpack cal for clarity
30ddb0c Updating phone number
6071420 Initialize repository
explore_california(master) > git log text_edits --oneline
fb06d89 (text_edits) Text edits on mission page
218c9d9 Adding .gitignore files
d3af33e Revert "Rearrange items to bring on an outdoor trip"
9cbe0c7 Rearrange items to bring on an outdoor trip
4d1fcbe Remove some contractions
11a13c7 Renamed backpack cal for clarity
30ddb0c Updating phone number
6071420 Initialize repository


explore_california(master) > git merge text_edits
Auto-merging mission.html
CONFLICT (content): Merge conflict in mission.html
Automatic merge failed; fix conflicts and then commit the result.
explore_california(master|MERGING) >


explore_california(master|MERGING) > git status
On branch master
You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Unmerged paths:
  (use "git add <file>..." to mark resolution)

	both modified:   mission.html

no changes added to commit (use "git add" and/or "git commit -a")


Conflicts are marked with

<<<<<<< HEAD
=======
>>>>>>> text_edits
```
### Resolving merge conflicts
Three choices
* Abort merge

`git merge --abort`

```
explore_california(master|MERGING) > git merge --abort
explore_california(master) > git status
On branch master
nothing to commit, working tree clean

```
* Resolve the conflicts manually
`git add <file>`

`git commit`

```
explore_california(master|MERGING) > git log --oneline -3
1fd6eba (HEAD -> master) Replaces double quotes with curly quotes
218c9d9 Adding .gitignore files
d3af33e Revert "Rearrange items to bring on an outdoor trip"

explore_california(master|MERGING) > git show 1fd6eba
commit 1fd6eba5873553551729cc33860f7c6253ecdc35 (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Sun Aug 5 07:36:58 2018 +0200

    Replaces double quotes with curly quotes

diff --git a/mission.html b/mission.html
index 81fd052..68bfeb1 100755
--- a/mission.html
+++ b/mission.html
@@ -64,7 +64,7 @@
           <div class="multiCol">
             <p>We are passionate about California and preserving the abundant resources that make it so unique. Our goal at Explore California is to transfo
             <p>Our tours are crafted around our central mission, and are designed to engage you in a unique and fulfilling way. All our tours are sensitive
-            <p>We've been asked before how we choose our tours. It's simple really, we approach our tours as the enthusiasts we are! When we scout for locat
+            <p>We&rsquo;ve been asked before how we choose our tours. It's simple really, we approach our tours as the enthusiasts we are! When we scout for
             <p>We've also worked very hard to make Explore California more than just a tour company. <a href="explorers/join.html">Join our community</a> an
           </div>
:
```

See the differenes between both branches commits

```
diff --git a/mission.html b/mission.html
index 68bfeb1..42706f4 100755
--- a/mission.html
+++ b/mission.html
@@ -62,10 +62,10 @@
          <h1>Who we are</h1>
          <img src="assets/images/mission_look.jpg" alt="Looking out at the Pacific" class="articleImage" />
          <div class="multiCol">
            <p>We are passionate about California and preserving the abundant resources that make it so unique. Our goal at Explore California is to transform your vacation into an adventure that will educate, inspire, and energize you unlike any other.</p>you.</p>
            <p>Our tours are crafted around our central mission, and are designed to engage you in a unique and fulfilling way. All our tours are sensitive to the environment,environmentally sensitive, and will provide you will an opportunity to explore California in your own way.</p>
            <p>We&rsquo;ve<p>We've been asked before how we choose our tours. It's simple really, we approach our tours as the enthusiasts we are! When we scout for locations, choose tour options, or explore the surrounding area for exciting side-tours, we ask ourselves onea question, &rdquo;is&quot;is this something we would want to do?&ldquo;do?&quot; We also look very carefully at a tour&rsquo;stour's potential impact. We choose tours that are as environmentally sensitive as we are, and that expose people to amazing diversity of California's people, places, and wildlife!</p>
            <p>We've<p>We have also worked very hard to make Explore California more than just a tour company. <a href="explorers/join.html">Join our community</a> and become part of the conversation. Recommend tours, blog about your journeys, and share pictures and video with other tour members.</p>
          </div>
        </div>
      </div>
```     
`git log --graph --oneline --all --decorate`

```
explore_california(master) > git log --graph --oneline --all --decorate
*   c0070b9 (HEAD -> master) Merge branch 'text_edits'
|\
| * fb06d89 (text_edits) Text edits on mission page
* | 1fd6eba Replaces double quotes with curly quotes
|/
| * 6a975da (shorten_title) Changes Title Index
|/
* 218c9d9 Adding .gitignore files
* d3af33e Revert "Rearrange items to bring on an outdoor trip"
* 9cbe0c7 Rearrange items to bring on an outdoor trip
* 4d1fcbe Remove some contractions
* 11a13c7 Renamed backpack cal for clarity
* 30ddb0c Updating phone number
* 6071420 Initialize repository
```


* Use a merge tool
`git mergetool --tool=<merge_tool>`

```
explore_california(master) > git mergetool

This message is displayed because 'merge.tool' is not configured.
See 'git mergetool --tool-help' or 'git help config' for more details.
'git mergetool' will now attempt to use one of the following tools:
tortoisemerge emerge vimdiff
No files need merging
```

### Strategies to reduce merge conflicts
* Keep lines short
* Keep commits small and focused
* Beware stray edits to whitespace
 - spaces, tabs, line returns
* Merge often
* Track changes to master, keep branch in synch with master branch (`tracking` process)

## Stashing changes
### Saving changes in the stash
The stash is a place where we can store changes temporarily without having to commit them to the repository. It's a lot like putting something into a drawer to save it for later. The stash is not part of the repository, the staging index or the working directory, it's a special fourth area in Git, separate from the others.

They're still a snapshot of the changes that we were in the process of making, just like a commit is. But they dont have a SHA associated with them.

`git stash save "<message>"`

It's possible to stash untracked files.

```
git status
On branch shorten_title
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   mission.html

no changes added to commit (use "git add" and/or "git commit -a")
explore_california(shorten_title) > git checkout master
error: Your local changes to the following files would be overwritten by checkout:
	mission.html
Please commit your changes or stash them before you switch branches.
Aborting
explore_california(shorten_title) > git stash save mission.html
Saved working directory and index state On shorten_title: mission.html
``` 
### Viewing stashed changes
* `git stash list`
* `git stash show stash@{0}`
* `git stash show -p stash@{0}`

```
git stash list
stash@{0}: On shorten_title: mission.html    <--- stash-item, branch, description

git stash show stash@{0}
 mission.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
 
git stash show -p stash@{0}
diff --git a/mission.html b/mission.html
index 81fd052..6224aa5 100755
--- a/mission.html
+++ b/mission.html
@@ -3,7 +3,7 @@
 <html lang="en">
   <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Explore California: Mission</title>
+    <title>Mission</title>
     <link href="assets/stylesheets/main.css" rel="stylesheet" type="text/css" media="all">
     <script src="assets/javascripts/jquery-1.5.1.min.js"></script>
     <script src="assets/javascripts/jquery-ui-1.8.10.custom.min.js"></script>
```

### Retrieving stashed changes
* `git stash pop` Pops the commit out and it's longer in there at all
* `git stash apply` Pull it out and lave a copy in the stash
* By the faults pop/apply the latest commit

### Deleting stashed changes
*`git stash drop stash@{0}`
* `git stash clear` Clear all stashes

```
git stash drop stash@{0}
Dropped stash@{0} (81a83be6b912737ea3482530748991314da0d766)

```

## Remote branches
### Using local and remote repositories
* `origin/master` in a local branch that references the remote server branch. 
Git also makes another branch on our local computer that is typically called origin slash and then whatever the branch name is.
* `push` Push branch to the remote server
* `fetch` Fetch is essentially saying sync up my origin master with the remote server version, but it does not bring it into our master branch.

The process that you go through when you're working with a remote, is that you'll do your commits locally, then you'll fetch the latest from the remote server, get your origin branch in sync, then merge any of the new work you did into what just came down from the server and then push the result back up to the remote server

### Setting up a GitHub account
* Github repository: `https://github.com/edlsantosmz/explore_california`

```
…or create a new repository on the command line
echo "# explore_california" >> README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/edlsantosmz/explore_california.git
git push -u origin master

…or push an existing repository from the command line <-- (We want this)
git remote add origin https://github.com/edlsantosmz/explore_california.git
git push -u origin master

…or import code from another repository
You can initialize this repository with code from a Subversion, Mercurial, or TFS project.
```

### Adding a remote repository
* `git remote add <alias> <url>`
* `git remote rm <alias>`
* `git remote` Shows all remote brances
* `git remote -v`
* `cat .git/config`

```
> git remote
explore_california(master) > git remote add origin https://github.com/edlsantosmz/explore_california.git
explore_california(master) > git remote
origin
explore_california(master) > git remote -v
origin	https://github.com/edlsantosmz/explore_california.git (fetch)
origin	https://github.com/edlsantosmz/explore_california.git (push)
explore_california(master) > cat .git/config
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
	ignorecase = true
	precomposeunicode = true
[remote "origin"]
	url = https://github.com/edlsantosmz/explore_california.git
	fetch = +refs/heads/*:refs/remotes/origin/*			<-- Instrcutions for fetching
```

### Creating a remote branch
* `git push -u <alias_for_the_remote_repository> <branch>
* `cat .git/config`
* `git branch -r` List remote branches
* `git branch -a`List all branches


```
> git push -u origin master
Username for 'https://github.com': edlsantosmz
Password for 'https://edlsantosmz@github.com':
Enumerating objects: 116, done.
Counting objects: 100% (116/116), done.
Delta compression using up to 8 threads.
Compressing objects: 100% (113/113), done.
Writing objects: 100% (116/116), 1.01 MiB | 24.15 MiB/s, done.
Total 116 (delta 34), reused 0 (delta 0)
remote: Resolving deltas: 100% (34/34), done.
To https://github.com/edlsantosmz/explore_california.git
 * [new branch]      master -> master
Branch 'master' set up to track remote branch 'master' from 'origin'. <-- This is what -u option does
explore_california(master) >

> cat .git/config
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
	ignorecase = true
	precomposeunicode = true
[remote "origin"]
	url = https://github.com/edlsantosmz/explore_california.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]	<-- New branch definition
	remote = origin
	merge = refs/heads/master
	
> ls -la .git/refs/remotes/
total 0
drwxr-xr-x  3 eduardos  staff   96  5 Aug 16:02 .
drwxr-xr-x  5 eduardos  staff  160  5 Aug 16:02 ..
drwxr-xr-x  3 eduardos  staff   96  5 Aug 16:02 origin

> ls -la .git/refs/remotes/origin/
total 8
drwxr-xr-x  3 eduardos  staff  96  5 Aug 16:02 .
drwxr-xr-x  3 eduardos  staff  96  5 Aug 16:02 ..
-rw-r--r--  1 eduardos  staff  41  5 Aug 16:02 master

> cat .git/refs/remotes/origin/master
c0070b9bb236f15dfdc1e54485bd82a6c014d89a

> git branch -r
  origin/master
explore_california(master) > git branch -a
* master
  shorten_title
  text_edits
  remotes/origin/master
```



