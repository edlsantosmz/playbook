# Git Essential Training
## Getting Started
### Performing your first commit


```
git add .
git commit -m "<comment>"
```

Git process
* Make changes
* Add changes
* Commit changes to the repository with a message

### Writing commit mesages 

What you really want to do is have a commit message that describes the changes that you're making in that commit set, so added file to project, that would be more descriptive saying that we added this first file. We are labeling what we were doing in this change set so when we come back and look at it later, we can just look at the commit message and know what's inside, what's contained in that set.

Commit message best practices
* short single-line summary, less than 50 characters
* Optionally, we can follow that by a blank line and then a more complete description
* keep those additional lines to less than 72 characters
* write commit messages in the present tense, not in the past tense, you are labeling what this commit does, not what you--as the creator--were doing. Label what it does. This fixes a bug, not I fixed a bug. It's not about you, it's about what this commit is.
*  bullet points that describe what happens you usually use asterisk or hyphens
* Add ticket tracking numbers from bugs or support requests or develop a shorthand for your organization
* Can develop shorthand for your organization
** "[cs,js]"
** "bugfix:"
** "#8981 - " 

Label

* Be clear and descriptive
** Bad: "Fix typo"
** Good: "Add missing > in project section of HTML" 
** Bad: "Update Login code"
** Good: "Change user authentication to use Blowfish"

Example
```
t23094 - Fixes bug in admin logout.

When an admin logged out of the admin area, they could not log in to the members area because their session :user_id was still set to the admin ID. This patch fixes the bug by setting session :user_id to nil when any user logs out of any area.
```

`Notice that it describes what the problem was and then describes what the solution was as well.``

### Viewing the commit log
```
git log
commit f247c20fe52a6fb0acf1d2773cb7b6699058461c (HEAD -> master)
Author: Eduardo <eduardos@spotify.com>
Date:   Fri Jul 27 21:57:21 2018 +0200

    Initial commit
```
Where
* commit: unique ID
* author: pulled from the global configuration

`git help log`

See number of commits
`git log -n <number>`

See commits in a specific period of time
```
git log --since=YY-MM-DD
git log --until=YY-MM-DD
git log --author="<name>"
```

Regular eexpression search in the commit message
`git log --grep="<regex-string>"`

## Git concepts and architecture
### Exploring the three-trees architecture
![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/Skärmavbild%202018-07-27%20kl.%2022.18.55.png "Two tree architecture")

![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/Skärmavbild%202018-07-27%20kl.%2022.23.10.png "Three-tree architecture")

* Working copy: where we have our changes that we've made, and we've saved, and saved to our hard drive, but we have not yet committed them to the repository, we haven't told Git to make this a changed set and to track it.
* Staging index, which is where we prepare things, we stage them for the commit, and then after they've been staged, we commit them to the repository so that they are permanently tracked and they now have a commit message attached to them.

### Git workflow

### Using hash value (SHA-1)
* Git generates a checksum for each changed set.
    * A checksum is a number that's generated by taking data and feeding it into an algorithm, so checksum algorithm converts data into a simple number, and we call that simple number a checksum
    * Changing the data changes the checksum
* Git generates this checksum is by using the SHA-1 hash algorithm
    * The number that the algorithm generates is always going to be a 40 character hexadecimal string. Hexadecimal means they can have the numbers 0 through 9 and the letters a through f.

![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/git_referring_to_commits.png)

### The HEAD pointer
Git maintains a reference variable called HEAD, all capitals, H-E-A-D. And we call this variable a pointer, because its purpose is to reference, or point to, a specific commit in the repository as we make new commits the pointer is going to change or move to point to a new commit.

HEAD
* Pointer to "tip" of current branch in repository
* Last state of repository, what was last checked out
* Not staging or working environment
* [analogy] - recording audio in a tape

![alt text](https://github.com/edlsantosmz/playbook/blob/master/images/git_head.png)

```
cd .git
Eduardos-MacBook-Pro:.git eduardos$ ls -ls
total 88
 8 -rw-r--r--   1 eduardos  staff     15 27 Jul 21:57 COMMIT_EDITMSG
 8 -rw-r--r--   1 eduardos  staff     23 27 Jul 21:56 HEAD
 8 -rw-r--r--   1 eduardos  staff    137 27 Jul 21:56 config
 8 -rw-r--r--   1 eduardos  staff     73 27 Jul 21:56 description
 0 drwxr-xr-x  12 eduardos  staff    384 27 Jul 21:56 hooks
56 -rw-r--r--   1 eduardos  staff  27715 27 Jul 21:57 index
 0 drwxr-xr-x   3 eduardos  staff     96 27 Jul 21:56 info
 0 drwxr-xr-x   4 eduardos  staff    128 27 Jul 21:57 logs
 0 drwxr-xr-x  88 eduardos  staff   2816 27 Jul 21:57 objects
 0 drwxr-xr-x   4 eduardos  staff    128 27 Jul 21:56 refs
Eduardos-MacBook-Pro:.git eduardos$ cat HEAD
ref: refs/heads/master
Eduardos-MacBook-Pro:.git eduardos$ cat refs/heads/master
f247c20fe52a6fb0acf1d2773cb7b6699058461c
```
`git log HEAD`

## Making changes to files
### Adding files
```
git status
On branch master

No commits yet

Changes to be committed:  <--- Staging index, things that are being staged
  (use "git rm --cached <file>..." to unstage)

	new file:   one

Untracked files: <---- Things in our working directory
  (use "git add <file>..." to include in what will be committed)

	second
    
git commit -m "Adding one"
[master (root-commit) 7295b6b] Adding one
 1 file changed, 1 insertion(+)
 create mode 100644 one

git add second

git commit -m "Adding second"
[master 4b39a35] Adding second
 1 file changed, 2 insertions(+)
 create mode 100644 second
 
git status
On branch master
nothing to commit, working tree clean
```

### Editing files

```
git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   one

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	third

no changes added to commit (use "git add" and/or "git commit -a")
$ git add one
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   one

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	third

$ git commit -m "updated one"
[master 45fff06] updated one
 1 file changed, 1 insertion(+), 1 deletion(-)
Eduardos-MacBook-Pro:git_lesson eduardos$ git status
On branch master
Untracked files:
  (use "git add <file>..." to include in what will be committed)

	third

nothing added to commit but untracked files present (use "git add" to track)
``` 

### Viewing changes with diff

`git diff <file>`
Return the changes that are in the working directory

```
$ git diff
diff --git a/second b/second
index eba21f2..7b2e797 100644
--- a/second	<--- Version in the stage index (old)
+++ b/second	<--- Version in the working directory (new)
@@ -1,2 +1,2 @@
-second		<--- old version
+second text	<--- new version
``` 

### Viewing only staged changes

`git diff --staged`
Return the changes that are in the staging index

``` 
$git diff --staged
diff --git a/second b/second
index eba21f2..7b2e797 100644
--- a/second	<--- Version in the repository (old)
+++ b/second	<--- Version in the staging index (new)
@@ -1,2 +1,2 @@
-second
+second text
``` 
### Deleting files
Command: `git rm <file>`

``` 
$ git rm third
rm 'third'
Eduardos-MacBook-Pro:git_lesson eduardos$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	deleted:    third

$ git commit -m "remove third"
[master eb79e59] remove third
 1 file changed, 1 deletion(-)
 delete mode 100644 third
 ``` 

### Moving and renaming files
Command: `git mv <file>`

```
$ git mv one first_file.txt
$ mkdir images
$ git mv second images/info.txt
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	renamed:    one -> first_file.txt
	renamed:    second -> images/info.txt
``` 

